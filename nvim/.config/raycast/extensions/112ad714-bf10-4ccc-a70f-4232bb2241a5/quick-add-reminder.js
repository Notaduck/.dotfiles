"use strict";var vn=Object.create;var yt=Object.defineProperty;var _n=Object.getOwnPropertyDescriptor;var Yn=Object.getOwnPropertyNames;var Un=Object.getPrototypeOf,Fn=Object.prototype.hasOwnProperty;var Jt=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Hn=(r,e)=>{for(var t in e)yt(r,t,{get:e[t],enumerable:!0})},er=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Yn(e))!Fn.call(r,i)&&i!==t&&yt(r,i,{get:()=>e[i],enumerable:!(n=_n(e,i))||n.enumerable});return r};var te=(r,e,t)=>(t=r!=null?vn(Un(r)):{},er(e||!r||!r.__esModule?yt(t,"default",{value:r,enumerable:!0}):t,r)),Bn=r=>er(yt({},"__esModule",{value:!0}),r);var tr=Jt((kt,$t)=>{(function(r,e){typeof kt=="object"&&typeof $t<"u"?$t.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(kt,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var a=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):a.bind(this)(o,u)};var s=i.startOf;i.startOf=function(o,u){var m=this.$utils(),h=!!m.u(u)||u;if(m.p(o)===e){var g=this.quarter()-1;return h?this.month(3*g).startOf(r).startOf("day"):this.month(3*g+2).endOf(r).endOf("day")}return s.bind(this)(o,u)}}})});var re=Jt((Ct,It)=>{(function(r,e){typeof Ct=="object"&&typeof It<"u"?It.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=e()})(Ct,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",a="minute",s="hour",o="day",u="week",m="month",h="quarter",g="year",W="date",lt="Invalid Date",mt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ht=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Q={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(p){var f=["th","st","nd","rd"],d=p%100;return"["+p+(f[(d-20)%10]||f[d]||f[0])+"]"}},K=function(p,f,d){var l=String(p);return!l||l.length>=f?p:""+Array(f+1-l.length).join(d)+p},pt={s:K,z:function(p){var f=-p.utcOffset(),d=Math.abs(f),l=Math.floor(d/60),c=d%60;return(f<=0?"+":"-")+K(l,2,"0")+":"+K(c,2,"0")},m:function p(f,d){if(f.date()<d.date())return-p(d,f);var l=12*(d.year()-f.year())+(d.month()-f.month()),c=f.clone().add(l,m),y=d-c<0,T=f.clone().add(l+(y?-1:1),m);return+(-(l+(d-c)/(y?c-T:T-c))||0)},a:function(p){return p<0?Math.ceil(p)||0:Math.floor(p)},p:function(p){return{M:m,y:g,w:u,d:o,D:W,h:s,m:a,s:i,ms:n,Q:h}[p]||String(p||"").toLowerCase().replace(/s$/,"")},u:function(p){return p===void 0}},J="en",j={};j[J]=Q;var ce="$isDayjsObject",ye=function(p){return p instanceof L||!(!p||!p[ce])},Te=function p(f,d,l){var c;if(!f)return J;if(typeof f=="string"){var y=f.toLowerCase();j[y]&&(c=y),d&&(j[y]=d,c=y);var T=f.split("-");if(!c&&T.length>1)return p(T[0])}else{var E=f.name;j[E]=f,c=E}return!l&&c&&(J=c),c||!l&&J},N=function(p,f){if(ye(p))return p.clone();var d=typeof f=="object"?f:{};return d.date=p,d.args=arguments,new L(d)},P=pt;P.l=Te,P.i=ye,P.w=function(p,f){return N(p,{locale:f.$L,utc:f.$u,x:f.$x,$offset:f.$offset})};var L=function(){function p(d){this.$L=Te(d.locale,null,!0),this.parse(d),this.$x=this.$x||d.x||{},this[ce]=!0}var f=p.prototype;return f.parse=function(d){this.$d=function(l){var c=l.date,y=l.utc;if(c===null)return new Date(NaN);if(P.u(c))return new Date;if(c instanceof Date)return new Date(c);if(typeof c=="string"&&!/Z$/i.test(c)){var T=c.match(mt);if(T){var E=T[2]-1||0,S=(T[7]||"0").substring(0,3);return y?new Date(Date.UTC(T[1],E,T[3]||1,T[4]||0,T[5]||0,T[6]||0,S)):new Date(T[1],E,T[3]||1,T[4]||0,T[5]||0,T[6]||0,S)}}return new Date(c)}(d),this.init()},f.init=function(){var d=this.$d;this.$y=d.getFullYear(),this.$M=d.getMonth(),this.$D=d.getDate(),this.$W=d.getDay(),this.$H=d.getHours(),this.$m=d.getMinutes(),this.$s=d.getSeconds(),this.$ms=d.getMilliseconds()},f.$utils=function(){return P},f.isValid=function(){return this.$d.toString()!==lt},f.isSame=function(d,l){var c=N(d);return this.startOf(l)<=c&&c<=this.endOf(l)},f.isAfter=function(d,l){return N(d)<this.startOf(l)},f.isBefore=function(d,l){return this.endOf(l)<N(d)},f.$g=function(d,l,c){return P.u(d)?this[l]:this.set(c,d)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(d,l){var c=this,y=!!P.u(l)||l,T=P.p(d),E=function(le,v){var ee=P.w(c.$u?Date.UTC(c.$y,v,le):new Date(c.$y,v,le),c);return y?ee:ee.endOf(o)},S=function(le,v){return P.w(c.toDate()[le].apply(c.toDate("s"),(y?[0,0,0,0]:[23,59,59,999]).slice(v)),c)},A=this.$W,R=this.$M,U=this.$D,we="set"+(this.$u?"UTC":"");switch(T){case g:return y?E(1,0):E(31,11);case m:return y?E(1,R):E(0,R+1);case u:var fe=this.$locale().weekStart||0,Ce=(A<fe?A+7:A)-fe;return E(y?U-Ce:U+(6-Ce),R);case o:case W:return S(we+"Hours",0);case s:return S(we+"Minutes",1);case a:return S(we+"Seconds",2);case i:return S(we+"Milliseconds",3);default:return this.clone()}},f.endOf=function(d){return this.startOf(d,!1)},f.$set=function(d,l){var c,y=P.p(d),T="set"+(this.$u?"UTC":""),E=(c={},c[o]=T+"Date",c[W]=T+"Date",c[m]=T+"Month",c[g]=T+"FullYear",c[s]=T+"Hours",c[a]=T+"Minutes",c[i]=T+"Seconds",c[n]=T+"Milliseconds",c)[y],S=y===o?this.$D+(l-this.$W):l;if(y===m||y===g){var A=this.clone().set(W,1);A.$d[E](S),A.init(),this.$d=A.set(W,Math.min(this.$D,A.daysInMonth())).$d}else E&&this.$d[E](S);return this.init(),this},f.set=function(d,l){return this.clone().$set(d,l)},f.get=function(d){return this[P.p(d)]()},f.add=function(d,l){var c,y=this;d=Number(d);var T=P.p(l),E=function(R){var U=N(y);return P.w(U.date(U.date()+Math.round(R*d)),y)};if(T===m)return this.set(m,this.$M+d);if(T===g)return this.set(g,this.$y+d);if(T===o)return E(1);if(T===u)return E(7);var S=(c={},c[a]=e,c[s]=t,c[i]=r,c)[T]||1,A=this.$d.getTime()+d*S;return P.w(A,this)},f.subtract=function(d,l){return this.add(-1*d,l)},f.format=function(d){var l=this,c=this.$locale();if(!this.isValid())return c.invalidDate||lt;var y=d||"YYYY-MM-DDTHH:mm:ssZ",T=P.z(this),E=this.$H,S=this.$m,A=this.$M,R=c.weekdays,U=c.months,we=c.meridiem,fe=function(v,ee,Ie,gt){return v&&(v[ee]||v(l,y))||Ie[ee].slice(0,gt)},Ce=function(v){return P.s(E%12||12,v,"0")},le=we||function(v,ee,Ie){var gt=v<12?"AM":"PM";return Ie?gt.toLowerCase():gt};return y.replace(ht,function(v,ee){return ee||function(Ie){switch(Ie){case"YY":return String(l.$y).slice(-2);case"YYYY":return P.s(l.$y,4,"0");case"M":return A+1;case"MM":return P.s(A+1,2,"0");case"MMM":return fe(c.monthsShort,A,U,3);case"MMMM":return fe(U,A);case"D":return l.$D;case"DD":return P.s(l.$D,2,"0");case"d":return String(l.$W);case"dd":return fe(c.weekdaysMin,l.$W,R,2);case"ddd":return fe(c.weekdaysShort,l.$W,R,3);case"dddd":return R[l.$W];case"H":return String(E);case"HH":return P.s(E,2,"0");case"h":return Ce(1);case"hh":return Ce(2);case"a":return le(E,S,!0);case"A":return le(E,S,!1);case"m":return String(S);case"mm":return P.s(S,2,"0");case"s":return String(l.$s);case"ss":return P.s(l.$s,2,"0");case"SSS":return P.s(l.$ms,3,"0");case"Z":return T}return null}(v)||T.replace(":","")})},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(d,l,c){var y,T=this,E=P.p(l),S=N(d),A=(S.utcOffset()-this.utcOffset())*e,R=this-S,U=function(){return P.m(T,S)};switch(E){case g:y=U()/12;break;case m:y=U();break;case h:y=U()/3;break;case u:y=(R-A)/6048e5;break;case o:y=(R-A)/864e5;break;case s:y=R/t;break;case a:y=R/e;break;case i:y=R/r;break;default:y=R}return c?y:P.a(y)},f.daysInMonth=function(){return this.endOf(m).$D},f.$locale=function(){return j[this.$L]},f.locale=function(d,l){if(!d)return this.$L;var c=this.clone(),y=Te(d,l,!0);return y&&(c.$L=y),c},f.clone=function(){return P.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},p}(),Y=L.prototype;return N.prototype=Y,[["$ms",n],["$s",i],["$m",a],["$H",s],["$W",o],["$M",m],["$y",g],["$D",W]].forEach(function(p){Y[p[1]]=function(f){return this.$g(f,p[0],p[1])}}),N.extend=function(p,f){return p.$i||(p(f,L,N),p.$i=!0),N},N.locale=Te,N.isDayjs=ye,N.unix=function(p){return N(1e3*p)},N.en=j[J],N.Ls=j,N.p={},N})});var Ua={};Hn(Ua,{default:()=>Wn});module.exports=Bn(Ua);var b=require("@raycast/api");var ir=te(tr(),1),We=te(re(),1);var w;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(w||(w={}));var k;(function(r){r[r.SUNDAY=0]="SUNDAY",r[r.MONDAY=1]="MONDAY",r[r.TUESDAY=2]="TUESDAY",r[r.WEDNESDAY=3]="WEDNESDAY",r[r.THURSDAY=4]="THURSDAY",r[r.FRIDAY=5]="FRIDAY",r[r.SATURDAY=6]="SATURDAY"})(k||(k={}));var _;(function(r){r[r.JANUARY=1]="JANUARY",r[r.FEBRUARY=2]="FEBRUARY",r[r.MARCH=3]="MARCH",r[r.APRIL=4]="APRIL",r[r.MAY=5]="MAY",r[r.JUNE=6]="JUNE",r[r.JULY=7]="JULY",r[r.AUGUST=8]="AUGUST",r[r.SEPTEMBER=9]="SEPTEMBER",r[r.OCTOBER=10]="OCTOBER",r[r.NOVEMBER=11]="NOVEMBER",r[r.DECEMBER=12]="DECEMBER"})(_||(_={}));function rr(r,e){e=e.add(1,"day"),me(r,e),xe(r,e)}function G(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}function Tt(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",w.AM):r.assign("meridiem",w.PM)}function me(r,e){r.imply("day",e.date()),r.imply("month",e.month()+1),r.imply("year",e.year())}function xe(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}var Wt=te(re(),1);var Ln={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:{timezoneOffsetDuringDst:2*60,timezoneOffsetNonDst:60,dstStart:r=>nr(r,_.MARCH,k.SUNDAY,2),dstEnd:r=>nr(r,_.OCTOBER,k.SUNDAY,3)},CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CT:{timezoneOffsetDuringDst:-5*60,timezoneOffsetNonDst:-6*60,dstStart:r=>ne(r,_.MARCH,k.SUNDAY,2,2),dstEnd:r=>ne(r,_.NOVEMBER,k.SUNDAY,1,2)},CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:{timezoneOffsetDuringDst:-4*60,timezoneOffsetNonDst:-5*60,dstStart:r=>ne(r,_.MARCH,k.SUNDAY,2,2),dstEnd:r=>ne(r,_.NOVEMBER,k.SUNDAY,1,2)},FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MT:{timezoneOffsetDuringDst:-6*60,timezoneOffsetNonDst:-7*60,dstStart:r=>ne(r,_.MARCH,k.SUNDAY,2,2),dstEnd:r=>ne(r,_.NOVEMBER,k.SUNDAY,1,2)},MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:{timezoneOffsetDuringDst:-7*60,timezoneOffsetNonDst:-8*60,dstStart:r=>ne(r,_.MARCH,k.SUNDAY,2,2),dstEnd:r=>ne(r,_.NOVEMBER,k.SUNDAY,1,2)},PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function ne(r,e,t,n,i=0){let a=0,s=0;for(;s<n;)a++,new Date(r,e-1,a).getDay()===t&&s++;return new Date(r,e-1,a,i)}function nr(r,e,t,n=0){let i=t===0?7:t,a=new Date(r,e-1+1,1,12),s=a.getDay()===0?7:a.getDay(),o;return s===i?o=7:s<i?o=7+s-i:o=s-i,a.setDate(a.getDate()-o),new Date(r,e-1,a.getDate(),n)}function wt(r,e,t={}){if(r==null)return null;if(typeof r=="number")return r;let n=t[r]??Ln[r];return n==null?null:typeof n=="number"?n:e==null?null:(0,Wt.default)(e).isAfter(n.dstStart(e.getFullYear()))&&!(0,Wt.default)(e).isAfter(n.dstEnd(e.getFullYear()))?n.timezoneOffsetDuringDst:n.timezoneOffsetNonDst}We.default.extend(ir.default);var ie=class{constructor(e){e=e??new Date,e instanceof Date?this.instant=e:(this.instant=e.instant??new Date,this.timezoneOffset=wt(e.timezone,this.instant))}getDateWithAdjustedTimezone(){return new Date(this.instant.getTime()+this.getSystemTimezoneAdjustmentMinute(this.instant)*6e4)}getSystemTimezoneAdjustmentMinute(e,t){(!e||e.getTime()<0)&&(e=new Date);let n=-e.getTimezoneOffset(),i=t??this.timezoneOffset??n;return n-i}},x=class r{constructor(e,t){if(this._tags=new Set,this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=(0,We.default)(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new r(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isDateWithUnknownYear(){return this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {
            tags: ${JSON.stringify(Array.from(this._tags).sort())}, 
            knownValues: ${JSON.stringify(this.knownValues)}, 
            impliedValues: ${JSON.stringify(this.impliedValues)}}, 
            reference: ${JSON.stringify(this.reference)}]`}dayjs(){return(0,We.default)(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment(),t=this.reference.getSystemTimezoneAdjustmentMinute(e,this.get("timezoneOffset"));return new Date(e.getTime()+t*6e4)}addTag(e){return this._tags.add(e),this}addTags(e){for(let t of e)this._tags.add(t);return this}tags(){return new Set(this._tags)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}static createRelativeFromReference(e,t){let n=(0,We.default)(e.instant);for(let a in t)n=n.add(t[a],a);let i=new r(e);return t.hour||t.minute||t.second?(Tt(i,n),G(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(xe(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}},z=class r{constructor(e,t,n,i,a){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new x(e),this.end=a}clone(){let e=new r(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}tags(){let e=new Set(this.start.tags());if(this.end)for(let t of this.end.tags())e.add(t);return e}toString(){let e=Array.from(this.tags()).sort();return`[ParsingResult {index: ${this.index}, text: '${this.text}', tags: ${JSON.stringify(e)} ...}]`}};function vt(r,e,t="\\s{0,5},?\\s{0,5}"){let n=e.replace(/\((?!\?)/g,"(?:");return`${r}${n}(?:${t}${n}){0,10}`}function Gn(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}function I(r){return`(?:${Gn(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}var ar=te(re(),1);function xt(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}function ae(r,e,t){let n=(0,ar.default)(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let a=i.add(1,"y"),s=i.add(-1,"y");return Math.abs(a.diff(n))<Math.abs(i.diff(n))?i=a:Math.abs(s.diff(n))<Math.abs(i.diff(n))&&(i=s),i.year()}var Ut={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},Ft={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},F={...Ft,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},_t={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},Yt={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},or={second:"second",seconds:"second",minute:"minute",minutes:"minute",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",quarter:"quarter",quarters:"quarter",year:"year",years:"year"},ve={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"d",day:"d",days:"d",w:"w",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year",...or},ur=`(?:${I(_t)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function jn(r){let e=r.toLowerCase();return _t[e]!==void 0?_t[e]:e==="a"||e==="an"||e=="the"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}var De=`(?:${I(Yt)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function Pe(r){let e=r.toLowerCase();return Yt[e]!==void 0?Yt[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}var Oe="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9]|2[0-5])";function Me(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return xt(e)}var dr=`(${ur})\\s{0,3}(${I(ve)})`,sr=new RegExp(dr,"i"),zn=`(${ur})\\s{0,3}(${I(or)})`,cr="\\s{0,5},?(?:\\s*and)?\\s{0,5}",V=vt("(?:(?:about|around)\\s{0,3})?",dr,cr),se=vt("(?:(?:about|around)\\s{0,3})?",zn,cr);function H(r){let e={},t=r,n=sr.exec(t);for(;n;)Vn(e,n),t=t.substring(n[0].length).trim(),n=sr.exec(t);return e}function Vn(r,e){let t=jn(e[1]),n=ve[e[2].toLowerCase()];r[n]=t}var O=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}innerPatternHasChange(e,t){return this.innerPattern(e)!==t}patternLeftBoundary(){return"(\\W|^)"}pattern(e){return this.cachedInnerPattern&&!this.innerPatternHasChange(e,this.cachedInnerPattern)?this.cachedPattern:(this.cachedInnerPattern=this.innerPattern(e),this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${this.cachedInnerPattern.source}`,this.cachedInnerPattern.flags),this.cachedPattern)}extract(e,t){let n=t[1]??"";t.index=t.index+n.length,t[0]=t[0].substring(n.length);for(let i=2;i<t.length;i++)t[i-1]=t[i];return this.innerExtract(e,t)}};var qn=new RegExp(`(?:(?:within|in|for)\\s*)?(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${V})(?=\\W|$)`,"i"),Xn=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${V})(?=\\W|$)`,"i"),Zn=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${se})(?=\\W|$)`,"i"),_e=class extends O{constructor(e){super(),this.strictMode=e}innerPattern(e){return this.strictMode?Zn:e.option.forwardDate?qn:Xn}innerExtract(e,t){if(t[0].match(/^for\s*the\s*\w+/))return null;let n=H(t[1]);return x.createRelativeFromReference(e.reference,n)}};var Qn=new RegExp(`(?:on\\s{0,3})?(${De})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${De}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${I(F)})(?:(?:-|/|,?\\s{0,3})(${Oe}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),fr=1,lr=2,Kn=3,mr=4,Ye=class extends O{innerPattern(){return Qn}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=F[t[Kn].toLowerCase()],a=Pe(t[fr]);if(a>31)return t.index=t.index+t[fr].length,null;if(n.start.assign("month",i),n.start.assign("day",a),t[mr]){let s=Me(t[mr]);n.start.assign("year",s)}else{let s=ae(e.refDate,a,i);n.start.imply("year",s)}if(t[lr]){let s=Pe(t[lr]);n.end=n.start.clone(),n.end.assign("day",s)}return n}};var Jn=new RegExp(`(${I(F)})(?:-|/|\\s*,?\\s*)(${De})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${De})\\s*)?(?:(?:-|/|\\s*,\\s*|\\s+)(${Oe}))?(?=\\W|$)(?!\\:\\d)`,"i"),ei=1,hr=2,Ht=3,Bt=4,Ue=class extends O{constructor(e){super(),this.shouldSkipYearLikeDate=e}innerPattern(){return Jn}innerExtract(e,t){let n=F[t[ei].toLowerCase()],i=Pe(t[hr]);if(i>31||this.shouldSkipYearLikeDate&&!t[Ht]&&!t[Bt]&&t[hr].match(/^2[0-5]$/))return null;let a=e.createParsingComponents({day:i,month:n}).addTag("parser/ENMonthNameMiddleEndianParser");if(t[Bt]){let u=Me(t[Bt]);a.assign("year",u)}else{let u=ae(e.refDate,i,n);a.imply("year",u)}if(!t[Ht])return a;let s=Pe(t[Ht]),o=e.createParsingResult(t.index,t[0]);return o.start=a,o.end=a.clone(),o.end.assign("day",s),o}};var ti=new RegExp(`((?:in)\\s*)?(${I(F)})\\s*(?:[,-]?\\s*(${Oe})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),ri=1,ni=2,pr=3,Fe=class extends O{innerPattern(){return ti}innerExtract(e,t){let n=t[ni].toLowerCase();if(t[0].length<=3&&!Ft[n])return null;let i=e.createParsingResult(t.index+(t[ri]||"").length,t.index+t[0].length);i.start.imply("day",1),i.start.addTag("parser/ENMonthNameParser");let a=F[n];if(i.start.assign("month",a),t[pr]){let s=Me(t[pr]);i.start.assign("year",s)}else{let s=ae(e.refDate,1,a);i.start.imply("year",s)}return i}};var ii=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${I(F)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),ai=1,si=2,gr=3,oi=4,He=class extends O{innerPattern(){return ii}innerExtract(e,t){let n=t[gr]?parseInt(t[gr]):F[t[si].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[ai]);return{day:parseInt(t[oi]),month:n,year:i}}};var ui=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),di=1,ci=2,Be=class extends O{innerPattern(){return ui}innerExtract(e,t){let n=parseInt(t[ci]),i=parseInt(t[di]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};function fi(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function li(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var yr=2,Ee=3,Dt=4,Pt=5,Le=6,Ot=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?!/)(?=\\W|$)"}followingSuffix(){return"(?!/)(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,a=t[0].substring(t[1].length),s=e.createParsingResult(i,a,n);t.index+=t[0].length;let o=e.text.substring(t.index),m=this.getFollowingTimePatternThroughCache().exec(o);return a.match(/^\d{3,4}/)&&m&&m[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!m||m[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(s):(s.end=this.extractFollowingTimeComponents(e,m,s),s.end&&(s.text+=m[0]),this.checkAndReturnWithFollowingPattern(s))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),a=0,s=null,o=parseInt(t[yr]);if(o>100){if(this.strictMode||t[Ee]!=null)return null;a=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[Ee]!=null){if(t[Ee].length==1&&!t[Le])return null;a=parseInt(t[Ee])}if(a>=60)return null;if(o>12&&(s=w.PM),t[Le]!=null){if(o>12)return null;let u=t[Le][0].toLowerCase();u=="a"&&(s=w.AM,o==12&&(o=0)),u=="p"&&(s=w.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",a),s!==null?i.assign("meridiem",s):o<12?i.imply("meridiem",w.AM):i.imply("meridiem",w.PM),t[Pt]!=null){let u=parseInt(t[Pt].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Dt]!=null){let u=parseInt(t[Dt]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[Pt]!=null){let u=parseInt(t[Pt].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Dt]!=null){let u=parseInt(t[Dt]);if(u>=60)return null;i.assign("second",u)}let a=parseInt(t[yr]),s=0,o=-1;if(t[Ee]!=null?s=parseInt(t[Ee]):a>100&&(s=a%100,a=Math.floor(a/100)),s>=60||a>24)return null;if(a>=12&&(o=w.PM),t[Le]!=null){if(a>12)return null;let u=t[Le][0].toLowerCase();u=="a"&&(o=w.AM,a==12&&(a=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=w.PM,a!=12&&(a+=12)),n.start.isCertain("meridiem")||(o==w.AM?(n.start.imply("meridiem",w.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",w.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",a),i.assign("minute",s),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>a?i.imply("meridiem",w.AM):a<=12&&(i.assign("hour",a+12),i.assign("meridiem",w.PM)):a>12?i.imply("meridiem",w.PM):a<=12&&i.imply("meridiem",w.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let a=parseInt(i),s=parseInt(n);if(a>24||s>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=fi(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=li(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};var Ge=class extends Ot{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(!n)return n;if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",w.PM)):i<6&&n.assign("meridiem",w.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",w.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}return t[0].endsWith("morning")&&(n.assign("meridiem",w.AM),n.get("hour")<12&&n.assign("hour",n.get("hour"))),n.addTag("parser/ENTimeExpressionParser")}};function oe(r){let e={};for(let t in r)e[t]=-r[t];return e}function Tr(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}var mi=new RegExp(`(${V})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),hi=new RegExp(`(${se})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),je=class extends O{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?hi:mi}innerExtract(e,t){let n=H(t[1]),i=oe(n);return x.createRelativeFromReference(e.reference,i)}};var pi=new RegExp(`(${V})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),gi=new RegExp(`(${se})\\s{0,5}(later|after|from now)(?=\\W|$)`,"i"),yi=1,ze=class extends O{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?gi:pi}innerExtract(e,t){let n=H(t[yi]);return x.createRelativeFromReference(e.reference,n)}};var Mt=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}},B=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],a=null;for(let s=1;s<t.length;s++){a=t[s];let o=e.text.substring(i.index+i.text.length,a.index);if(!this.shouldMergeResults(o,i,a,e))n.push(i),i=a;else{let u=i,m=a,h=this.mergeResults(o,u,m,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${m} into ${h}`)}),i=h}}return i!=null&&n.push(i),n}};var Ve=class extends B{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(a=>{t.start.isCertain(a)||t.start.imply(a,n.start.get(a))}),t.start.getCertainComponents().forEach(a=>{n.start.isCertain(a)||n.start.imply(a,t.start.get(a))})),t.start.date().getTime()>n.start.date().getTime()){let a=t.start.dayjs(),s=n.start.dayjs();n.start.isOnlyWeekdayComponent()&&s.add(7,"days").isAfter(a)?(s=s.add(7,"days"),n.start.imply("day",s.date()),n.start.imply("month",s.month()+1),n.start.imply("year",s.year())):t.start.isOnlyWeekdayComponent()&&a.add(-7,"days").isBefore(s)?(a=a.add(-7,"days"),t.start.imply("day",a.date()),t.start.imply("month",a.month()+1),t.start.imply("year",a.year())):n.start.isDateWithUnknownYear()&&s.add(1,"years").isAfter(a)?(s=s.add(1,"years"),n.start.imply("year",s.year())):t.start.isDateWithUnknownYear()&&a.add(-1,"years").isBefore(s)?(a=a.add(-1,"years"),t.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};var qe=class extends Ve{patternBetween(){return/^\s*(to|-|â€“|until|through|till)\s*$/i}};function Lt(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=wr(n,i),r.end!=null||e.end!=null){let a=r.end==null?r.start:r.end,s=e.end==null?e.start:e.end,o=wr(a,s);if(r.end==null&&o.date().getTime()<t.start.date().getTime()){let u=o.dayjs().add(1,"day");o.isCertain("day")?G(o,u):me(o,u)}t.end=o}return t}function wr(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==w.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t.addTags(r.tags()),t.addTags(e.tags()),t}var Xe=class extends B{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?Lt(t,n):Lt(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};var Ae=class extends Xe{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};var Ti=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Ze=class{constructor(e){this.timezoneOverrides=e}refine(e,t){let n=e.option.timezones??{};return t.forEach(i=>{let a=e.text.substring(i.index+i.text.length),s=Ti.exec(a);if(!s)return;let o=s[1].toUpperCase(),u=i.start.date()??i.refDate??new Date,m={...this.timezoneOverrides,...n},h=wt(o,u,m);if(h==null)return;e.debug(()=>{console.log(`Extracting timezone: '${o}' into: ${h} for: ${i.start}`)});let g=i.start.get("timezoneOffset");g!==null&&h!=g&&(i.start.isCertain("timezoneOffset")||o!=s[1])||i.start.isOnlyDate()&&o!=s[1]||(i.text+=s[0],i.start.isCertain("timezoneOffset")||i.start.assign("timezoneOffset",h),i.end!=null&&!i.end.isCertain("timezoneOffset")&&i.end.assign("timezoneOffset",h))}),t}};var wi=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),xi=1,Di=2,Pi=3,Qe=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),a=wi.exec(i);if(!a)return;e.debug(()=>{console.log(`Extracting timezone: '${a[0]}' into : ${n}`)});let s=parseInt(a[Di]),o=parseInt(a[Pi]||"0"),u=s*60+o;u>14*60||(a[xi]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=a[0])}),t}};var ue=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let a=1;a<t.length;a++){let s=t[a];if(s.index>=i.index+i.text.length){n.push(i),i=s;continue}let o=null,u=null;s.text.length>i.text.length?(o=s,u=i):(o=i,u=s),e.debug(()=>{console.log(`${this.constructor.name} remove ${u} by ${o}`)}),i=o}return i!=null&&n.push(i),n}};var xr=te(re(),1);var Ke=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=(0,xr.default)(e.refDate);if(n.start.isOnlyTime()&&i.isAfter(n.start.dayjs())&&(i=i.add(1,"day"),me(n.start,i),n.end&&n.end.isOnlyTime()&&(me(n.end,i),n.start.dayjs().isAfter(n.end.dayjs())&&(i=i.add(1,"day"),me(n.end,i)))),n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)}))),n.start.isDateWithUnknownYear()&&i.isAfter(n.start.dayjs()))for(let a=0;a<3&&i.isAfter(n.start.dayjs());a++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}))}),t}};var Je=class extends Mt{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};var Oi=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),Mi=1,Ei=2,Ai=3,Dr=4,bi=5,Pr=6,Or=7,Mr=8,Er=9,et=class extends O{innerPattern(){return Oi}innerExtract(e,t){let n={};if(n.year=parseInt(t[Mi]),n.month=parseInt(t[Ei]),n.day=parseInt(t[Ai]),t[Dr]!=null)if(n.hour=parseInt(t[Dr]),n.minute=parseInt(t[bi]),t[Pr]!=null&&(n.second=parseInt(t[Pr])),t[Or]!=null&&(n.millisecond=parseInt(t[Or])),t[Mr]==null)n.timezoneOffset=0;else{let i=parseInt(t[Mr]),a=0;t[Er]!=null&&(a=parseInt(t[Er]));let s=i*60;s<0?s-=a:s+=a,n.timezoneOffset=s}return n}};var tt=class extends B{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};function Ar(r,e=!1){return r.parsers.unshift(new et),r.refiners.unshift(new tt),r.refiners.unshift(new Qe),r.refiners.unshift(new ue),r.refiners.push(new Ze),r.refiners.push(new ue),r.refiners.push(new Ke),r.refiners.push(new Je(e)),r}var Ur=te(re(),1);var be=te(re(),1);function br(r){let e=(0,be.default)(r.instant),t=new x(r,{});return G(t,e),Tt(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t.addTag("casualReference/now"),t}function Sr(r){let e=(0,be.default)(r.instant),t=new x(r,{});return G(t,e),xe(t,e),t.addTag("casualReference/today"),t}function Rr(r){return Si(r,1).addTag("casualReference/yesterday")}function Si(r,e){return kr(r,-e)}function Nr(r){return kr(r,1).addTag("casualReference/tomorrow")}function kr(r,e){let t=(0,be.default)(r.instant),n=new x(r,{});return t=t.add(e,"day"),G(n,t),xe(n,t),n}function $r(r,e=22){let t=(0,be.default)(r.instant),n=new x(r,{});return G(n,t),n.imply("hour",e),n.imply("meridiem",w.PM),n.addTag("casualReference/tonight"),n}function Cr(r,e=20){let t=new x(r,{});return t.imply("meridiem",w.PM),t.imply("hour",e),t.addTag("casualReference/evening"),t}function Ir(r){let e=new x(r,{}),t=(0,be.default)(r.instant);return t.hour()>2&&rr(e,t),e.assign("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("millisecond",0),e.addTag("casualReference/midnight"),e}function Wr(r,e=6){let t=new x(r,{});return t.imply("meridiem",w.AM),t.imply("hour",e),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/morning"),t}function vr(r,e=15){let t=new x(r,{});return t.imply("meridiem",w.PM),t.imply("hour",e),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/afternoon"),t}function _r(r){let e=new x(r,{});return e.imply("meridiem",w.AM),e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("millisecond",0),e.addTag("casualReference/noon"),e}var Ri=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,rt=class extends O{innerPattern(e){return Ri}innerExtract(e,t){let n=(0,Ur.default)(e.refDate),i=t[0].toLowerCase(),a=e.createParsingComponents();switch(i){case"now":a=br(e.reference);break;case"today":a=Sr(e.reference);break;case"yesterday":a=Rr(e.reference);break;case"tomorrow":case"tmr":case"tmrw":a=Nr(e.reference);break;case"tonight":a=$r(e.reference);break;default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),G(a,n),a.imply("hour",0));break}return a.addTag("parser/ENCasualDateParser"),a}};var Ni=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i,nt=class extends O{innerPattern(){return Ni}innerExtract(e,t){let n=null;switch(t[1].toLowerCase()){case"afternoon":n=vr(e.reference);break;case"evening":case"night":n=Cr(e.reference);break;case"midnight":n=Ir(e.reference);break;case"morning":n=Wr(e.reference);break;case"noon":case"midday":n=_r(e.reference);break}return n&&n.addTag("parser/ENCasualTimeParser"),n}};function Fr(r,e,t){let n=r.getDateWithAdjustedTimezone(),i=ki(n,e,t),a=new x(r);return a=Tr(a,{day:i}),a.assign("weekday",e),a}function ki(r,e,t){let n=r.getDay();switch(t){case"this":return Et(r,e);case"last":return Hr(r,e);case"next":return n==k.SUNDAY?e==k.SUNDAY?7:e:n==k.SATURDAY?e==k.SATURDAY?7:e==k.SUNDAY?8:1+e:e<n&&e!=k.SUNDAY?Et(r,e):Et(r,e)+7}return $i(r,e)}function $i(r,e){let t=Hr(r,e),n=Et(r,e);return n<-t?n:t}function Et(r,e){let t=r.getDay(),n=e-t;return n<0&&(n+=7),n}function Hr(r,e){let t=r.getDay(),n=e-t;return n>=0&&(n-=7),n}var Ci=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${I(Ut)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),Ii=1,Wi=2,vi=3,it=class extends O{innerPattern(){return Ci}innerExtract(e,t){let n=t[Wi].toLowerCase(),i=Ut[n],a=t[Ii],s=t[vi],o=a||s;o=o||"",o=o.toLowerCase();let u=null;return o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this"),Fr(e.reference,i,u)}};var Br=te(re(),1);var _i=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${I(ve)})(?=\\s*)(?=\\W|$)`,"i"),Yi=1,Ui=2,at=class extends O{innerPattern(){return _i}innerExtract(e,t){let n=t[Yi].toLowerCase(),i=t[Ui].toLowerCase(),a=ve[i];if(n=="next"||n.startsWith("after")){let u={};return u[a]=1,x.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[a]=-1,x.createRelativeFromReference(e.reference,u)}let s=e.createParsingComponents(),o=(0,Br.default)(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),s.imply("day",o.date()),s.imply("month",o.month()+1),s.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),s.imply("day",o.date()),s.assign("year",o.year()),s.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),s.imply("day",o.date()),s.imply("month",o.month()+1),s.assign("year",o.year())),s}};var Fi=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),At=1,Hi=5,Lr=2,Gr=3,Gt=4,st=class{constructor(e){this.groupNumberMonth=e?Gr:Lr,this.groupNumberDay=e?Lr:Gr}pattern(){return Fi}extract(e,t){if(t[At].length==0&&t.index>0&&t.index<e.text.length){let u=e.text[t.index-1];if(u>="0"&&u<="9")return}let n=t.index+t[At].length,i=t[0].substr(t[At].length,t[0].length-t[At].length-t[Hi].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[Gt]&&t[0].indexOf("/")<0)return;let a=e.createParsingResult(n,i),s=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((s<1||s>12)&&s>12)if(o>=1&&o<=12&&s<=31)[o,s]=[s,o];else return null;if(o<1||o>31)return null;if(a.start.assign("day",o),a.start.assign("month",s),t[Gt]){let u=parseInt(t[Gt]),m=xt(u);a.start.assign("year",m)}else{let u=ae(e.refDate,o,s);a.start.imply("year",u)}return a}};var Bi=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${V})(?=\\W|$)`,"i"),Li=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${se})(?=\\W|$)`,"i"),ot=class extends O{constructor(e=!0){super(),this.allowAbbreviations=e}innerPattern(){return this.allowAbbreviations?Bi:Li}innerExtract(e,t){let n=t[1].toLowerCase(),i=H(t[2]);switch(n){case"last":case"past":case"-":i=oe(i);break}return x.createRelativeFromReference(e.reference,i)}};function Gi(r){return r.text.match(/^[+-]/i)!=null}function jr(r){return r.text.match(/^-/i)!=null}var ut=class extends B{shouldMergeResults(e,t,n){return e.match(/^\s*$/i)?Gi(n)||jr(n):!1}mergeResults(e,t,n,i){let a=H(n.text);jr(n)&&(a=oe(a));let s=x.createRelativeFromReference(new ie(t.start.date()),a);return new z(t.reference,t.index,`${t.text}${e}${n.text}`,s)}};function zr(r){return r.text.match(/\s+(before|from)$/i)!=null}function ji(r){return r.text.match(/\s+(after|since)$/i)!=null}var dt=class extends B{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!zr(t)&&!ji(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=H(t.text);zr(t)&&(i=oe(i));let a=x.createRelativeFromReference(new ie(n.start.date()),i);return new z(n.reference,t.index,`${t.text}${e}${n.text}`,a)}};var he=class{createCasualConfiguration(e=!1){let t=this.createConfiguration(!1,e);return t.parsers.push(new rt),t.parsers.push(new nt),t.parsers.push(new Fe),t.parsers.push(new at),t.parsers.push(new ot),t}createConfiguration(e=!0,t=!1){let n=Ar({parsers:[new st(t),new _e(e),new Ye,new Ue(t),new it,new He,new Be,new Ge(e),new je(e),new ze(e)],refiners:[new Ae]},e);return n.refiners.unshift(new dt),n.refiners.unshift(new ut),n.refiners.unshift(new ue),n.refiners.push(new Ae),n.refiners.push(new qe),n}};var Se=class r{constructor(e){this.defaultConfig=new he,e=e||this.defaultConfig.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new r({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new jt(e,t,n),a=[];return this.parsers.forEach(s=>{let o=r.executeParser(i,s);a=a.concat(o)}),a.sort((s,o)=>s.index-o.index),this.refiners.forEach(function(s){a=s.refine(i,a)}),a}static executeParser(e,t){let n=[],i=t.pattern(e),a=e.text,s=e.text,o=i.exec(s);for(;o;){let u=o.index+a.length-s.length;o.index=u;let m=t.extract(e,o);if(!m){s=a.substring(o.index+1),o=i.exec(s);continue}let h=null;m instanceof z?h=m:m instanceof x?(h=e.createParsingResult(o.index,o[0]),h.start=m):h=e.createParsingResult(o.index,o[0],m);let g=h.index,W=h.text;e.debug(()=>console.log(`${t.constructor.name} extracted (at index=${g}) '${W}'`)),n.push(h),s=a.substring(g+W.length),o=i.exec(s)}return n}},jt=class{constructor(e,t,n){this.text=e,this.reference=new ie(t),this.option=n??{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof x?e:new x(this.reference,e)}createParsingResult(e,t,n,i){let a=typeof t=="string"?t:this.text.substring(e,t),s=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new z(this.reference,e,a,s,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};var zt=new he,Vr=new Se(zt.createCasualConfiguration(!1)),zi=new Se(zt.createConfiguration(!0,!1)),Yu=new Se(zt.createCasualConfiguration(!0));var qi=Vr;function qr(r,e,t){return qi.parse(r,e,t)}function M(r){let e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function $(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}function q(r,e){let t=M(r);return isNaN(e)?$(r,NaN):(e&&t.setDate(t.getDate()+e),t)}function Xr(r,e){let t=M(r);if(isNaN(e))return $(r,NaN);if(!e)return t;let n=t.getDate(),i=$(r,t.getTime());i.setMonth(t.getMonth()+e+1,0);let a=i.getDate();return n>=a?i:(t.setFullYear(i.getFullYear(),i.getMonth(),n),t)}function Zr(r,e){let t=+M(r);return $(r,t+e)}var Zi=Math.pow(10,8)*24*60*60*1e3,Zu=-Zi,bt=6048e5,Qr=864e5;var Kr=36e5;var Qi=3600;var Jr=Qi*24,Qu=Jr*7,Ki=Jr*365.2425,Ji=Ki/12,Ku=Ji*3;function en(r,e){return Zr(r,e*Kr)}var ea={};function de(){return ea}function X(r,e){let t=de(),n=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=M(r),a=i.getDay(),s=(a<n?7:0)+a-n;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function pe(r){return X(r,{weekStartsOn:1})}function St(r){let e=M(r),t=e.getFullYear(),n=$(r,0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);let i=pe(n),a=$(r,0);a.setFullYear(t,0,4),a.setHours(0,0,0,0);let s=pe(a);return e.getTime()>=i.getTime()?t+1:e.getTime()>=s.getTime()?t:t-1}function Vt(r){let e=M(r);return e.setHours(0,0,0,0),e}function qt(r){let e=M(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function tn(r,e){let t=Vt(r),n=Vt(e),i=+t-qt(t),a=+n-qt(n);return Math.round((i-a)/Qr)}function rn(r){let e=St(r),t=$(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),pe(t)}function nn(r,e){return Xr(r,e*12)}function an(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function sn(r){if(!an(r)&&typeof r!="number")return!1;let e=M(r);return!isNaN(Number(e))}function on(r){let e=M(r),t=$(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}var ta={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},un=(r,e,t)=>{let n,i=ta[r];return typeof i=="string"?n=i:e===1?n=i.one:n=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function Rt(r){return(e={})=>{let t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}var ra={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},na={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ia={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},dn={date:Rt({formats:ra,defaultWidth:"full"}),time:Rt({formats:na,defaultWidth:"full"}),dateTime:Rt({formats:ia,defaultWidth:"full"})};var aa={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},cn=(r,e,t,n)=>aa[r];function Re(r){return(e,t)=>{let n=t?.context?String(t.context):"standalone",i;if(n==="formatting"&&r.formattingValues){let s=r.defaultFormattingWidth||r.defaultWidth,o=t?.width?String(t.width):s;i=r.formattingValues[o]||r.formattingValues[s]}else{let s=r.defaultWidth,o=t?.width?String(t.width):r.defaultWidth;i=r.values[o]||r.values[s]}let a=r.argumentCallback?r.argumentCallback(e):e;return i[a]}}var sa={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},oa={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ua={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},da={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ca={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fa={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},la=(r,e)=>{let t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},fn={ordinalNumber:la,era:Re({values:sa,defaultWidth:"wide"}),quarter:Re({values:oa,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Re({values:ua,defaultWidth:"wide"}),day:Re({values:da,defaultWidth:"wide"}),dayPeriod:Re({values:ca,defaultWidth:"wide",formattingValues:fa,defaultFormattingWidth:"wide"})};function Ne(r){return(e,t={})=>{let n=t.width,i=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],a=e.match(i);if(!a)return null;let s=a[0],o=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],u=Array.isArray(o)?ha(o,g=>g.test(s)):ma(o,g=>g.test(s)),m;m=r.valueCallback?r.valueCallback(u):u,m=t.valueCallback?t.valueCallback(m):m;let h=e.slice(s.length);return{value:m,rest:h}}}function ma(r,e){for(let t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function ha(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function ln(r){return(e,t={})=>{let n=e.match(r.matchPattern);if(!n)return null;let i=n[0],a=e.match(r.parsePattern);if(!a)return null;let s=r.valueCallback?r.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;let o=e.slice(i.length);return{value:s,rest:o}}}var pa=/^(\d+)(th|st|nd|rd)?/i,ga=/\d+/i,ya={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ta={any:[/^b/i,/^(a|c)/i]},wa={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},xa={any:[/1/i,/2/i,/3/i,/4/i]},Da={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Pa={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Oa={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ma={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ea={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Aa={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mn={ordinalNumber:ln({matchPattern:pa,parsePattern:ga,valueCallback:r=>parseInt(r,10)}),era:Ne({matchPatterns:ya,defaultMatchWidth:"wide",parsePatterns:Ta,defaultParseWidth:"any"}),quarter:Ne({matchPatterns:wa,defaultMatchWidth:"wide",parsePatterns:xa,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Ne({matchPatterns:Da,defaultMatchWidth:"wide",parsePatterns:Pa,defaultParseWidth:"any"}),day:Ne({matchPatterns:Oa,defaultMatchWidth:"wide",parsePatterns:Ma,defaultParseWidth:"any"}),dayPeriod:Ne({matchPatterns:Ea,defaultMatchWidth:"any",parsePatterns:Aa,defaultParseWidth:"any"})};var Xt={code:"en-US",formatDistance:un,formatLong:dn,formatRelative:cn,localize:fn,match:mn,options:{weekStartsOn:0,firstWeekContainsDate:1}};function hn(r){let e=M(r);return tn(e,on(e))+1}function pn(r){let e=M(r),t=+pe(e)-+rn(e);return Math.round(t/bt)+1}function Nt(r,e){let t=M(r),n=t.getFullYear(),i=de(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=$(r,0);s.setFullYear(n+1,0,a),s.setHours(0,0,0,0);let o=X(s,e),u=$(r,0);u.setFullYear(n,0,a),u.setHours(0,0,0,0);let m=X(u,e);return t.getTime()>=o.getTime()?n+1:t.getTime()>=m.getTime()?n:n-1}function gn(r,e){let t=de(),n=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=Nt(r,e),a=$(r,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),X(a,e)}function yn(r,e){let t=M(r),n=+X(t,e)-+gn(t,e);return Math.round(n/bt)+1}function D(r,e){let t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}var Z={y(r,e){let t=r.getFullYear(),n=t>0?t:1-t;return D(e==="yy"?n%100:n,e.length)},M(r,e){let t=r.getMonth();return e==="M"?String(t+1):D(t+1,2)},d(r,e){return D(r.getDate(),e.length)},a(r,e){let t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return D(r.getHours()%12||12,e.length)},H(r,e){return D(r.getHours(),e.length)},m(r,e){return D(r.getMinutes(),e.length)},s(r,e){return D(r.getSeconds(),e.length)},S(r,e){let t=e.length,n=r.getMilliseconds(),i=Math.trunc(n*Math.pow(10,t-3));return D(i,e.length)}};var ke={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Zt={G:function(r,e,t){let n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){let n=r.getFullYear(),i=n>0?n:1-n;return t.ordinalNumber(i,{unit:"year"})}return Z.y(r,e)},Y:function(r,e,t,n){let i=Nt(r,n),a=i>0?i:1-i;if(e==="YY"){let s=a%100;return D(s,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):D(a,e.length)},R:function(r,e){let t=St(r);return D(t,e.length)},u:function(r,e){let t=r.getFullYear();return D(t,e.length)},Q:function(r,e,t){let n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return D(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){let n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return D(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){let n=r.getMonth();switch(e){case"M":case"MM":return Z.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){let n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return D(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){let i=yn(r,n);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):D(i,e.length)},I:function(r,e,t){let n=pn(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):D(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):Z.d(r,e)},D:function(r,e,t){let n=hn(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):D(n,e.length)},E:function(r,e,t){let n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){let i=r.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return D(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){let i=r.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return D(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(r,e,t){let n=r.getDay(),i=n===0?7:n;switch(e){case"i":return String(i);case"ii":return D(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){let i=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(r,e,t){let n=r.getHours(),i;switch(n===12?i=ke.noon:n===0?i=ke.midnight:i=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(r,e,t){let n=r.getHours(),i;switch(n>=17?i=ke.evening:n>=12?i=ke.afternoon:n>=4?i=ke.morning:i=ke.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return Z.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):Z.H(r,e)},K:function(r,e,t){let n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):D(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):D(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):Z.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):Z.s(r,e)},S:function(r,e){return Z.S(r,e)},X:function(r,e,t){let n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return wn(n);case"XXXX":case"XX":return ge(n);case"XXXXX":case"XXX":default:return ge(n,":")}},x:function(r,e,t){let n=r.getTimezoneOffset();switch(e){case"x":return wn(n);case"xxxx":case"xx":return ge(n);case"xxxxx":case"xxx":default:return ge(n,":")}},O:function(r,e,t){let n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Tn(n,":");case"OOOO":default:return"GMT"+ge(n,":")}},z:function(r,e,t){let n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Tn(n,":");case"zzzz":default:return"GMT"+ge(n,":")}},t:function(r,e,t){let n=Math.trunc(r.getTime()/1e3);return D(n,e.length)},T:function(r,e,t){let n=r.getTime();return D(n,e.length)}};function Tn(r,e=""){let t=r>0?"-":"+",n=Math.abs(r),i=Math.trunc(n/60),a=n%60;return a===0?t+String(i):t+String(i)+e+D(a,2)}function wn(r,e){return r%60===0?(r>0?"-":"+")+D(Math.abs(r)/60,2):ge(r,e)}function ge(r,e=""){let t=r>0?"-":"+",n=Math.abs(r),i=D(Math.trunc(n/60),2),a=D(n%60,2);return t+i+e+a}var xn=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Dn=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},ba=(r,e)=>{let t=r.match(/(P+)(p+)?/)||[],n=t[1],i=t[2];if(!i)return xn(r,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",xn(n,e)).replace("{{time}}",Dn(i,e))},Pn={p:Dn,P:ba};var Sa=/^D+$/,Ra=/^Y+$/,Na=["D","DD","YY","YYYY"];function On(r){return Sa.test(r)}function Mn(r){return Ra.test(r)}function En(r,e,t){let n=ka(r,e,t);if(console.warn(n),Na.includes(r))throw new RangeError(n)}function ka(r,e,t){let n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var $a=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ca=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ia=/^'([^]*?)'?$/,Wa=/''/g,va=/[a-zA-Z]/;function C(r,e,t){let n=de(),i=t?.locale??n.locale??Xt,a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=M(r);if(!sn(o))throw new RangeError("Invalid time value");let u=e.match(Ca).map(h=>{let g=h[0];if(g==="p"||g==="P"){let W=Pn[g];return W(h,i.formatLong)}return h}).join("").match($a).map(h=>{if(h==="''")return{isToken:!1,value:"'"};let g=h[0];if(g==="'")return{isToken:!1,value:_a(h)};if(Zt[g])return{isToken:!0,value:h};if(g.match(va))throw new RangeError("Format string contains an unescaped latin alphabet character `"+g+"`");return{isToken:!1,value:h}});i.localize.preprocessor&&(u=i.localize.preprocessor(o,u));let m={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return u.map(h=>{if(!h.isToken)return h.value;let g=h.value;(!t?.useAdditionalWeekYearTokens&&Mn(g)||!t?.useAdditionalDayOfYearTokens&&On(g))&&En(g,e,String(r));let W=Zt[g[0]];return W(o,g,i.localize,m)}).join("")}function _a(r){let e=r.match(Ia);return e?e[1].replace(Wa,"'"):r}function An(r){return M(r).getDay()}function $e(r,e){let t=e-An(r);return t<=0&&(t+=7),q(r,t)}function bn(r){return $e(r,5)}function Sn(r){return $e(r,6)}function Rn(r){return $e(r,0)}function ct(r,e){return en(r,-e)}var Nn=require("@raycast/api"),kn=require("path"),$n=require("fs/promises"),Cn=require("child_process");async function In(r,...e){let t=(0,kn.join)(Nn.environment.assetsPath,"compiled_raycast_swift/AppleReminders");return await(0,$n.chmod)(t,"755"),new Promise((n,i)=>{let a=[r];for(let m of e)try{a.push(JSON.stringify(m,(h,g)=>g===void 0?null:g))}catch(h){i(new ft("Failed to serialize input to JSON: "+h.message));return}let s=(0,Cn.spawn)(t,a),o=[],u=[];s.stdout?.on("data",m=>{o.push(m.toString())}),s.stderr?.on("data",m=>{u.push(m.toString())}),s.on("exit",m=>{if(m===0)try{let h=o.join("").trim();h.length!=0?n(JSON.parse(h)):n(null)}catch(h){let g=new ft("Failed to deserialize result from JSON: "+h.message);g.stdout=o.join("").trim(),g.stderr=u.join("").trim(),i(g)}else{let h=new ft(u.join("").trim()||o.join("").trim()||"Could not get any data");h.stdout=o.join("").trim(),h.stderr=u.join("").trim(),i(h)}}),s.on("error",m=>{i(m)})})}async function Qt(){return await In("getData")}async function Kt(r){return await In("createReminder",r)}var ft=class extends Error{constructor(e){super(e),this.name="SwiftError"}};async function Wn(r){try{let e=(0,b.getPreferenceValues)();if(e.shouldCloseMainWindow?await(0,b.closeMainWindow)():await(0,b.showToast)({style:b.Toast.Style.Animated,title:"Adding to-do"}),!b.environment.canAccess(b.AI)||e.dontUseAI){let Y=r.arguments.text,p,f,d,l=qr(Y);if(l&&l.length>0){let A=l[0].start;d=A.isCertain("hour")||A.isCertain("minute")||A.isCertain("second");let R=A.date();f=d?R.toISOString():C(R,"yyyy-MM-dd")}let c=Y.match(/#(\w+)/);c&&(p=(await Qt()).lists.find(R=>R.title.toLowerCase()===c[1].toLowerCase()));let y=Y.replace(c?c[0]:"","").replace(l&&l.length>0?l[0].text:"","").replace(/\s+/g," ").trim(),T={title:y,listId:p?.id,dueDate:f};r.arguments.notes&&(T.notes=r.arguments.notes),await Kt(T);let E=f?` due ${C(f,`${d?"PPPpp":"PPP"}`)}`:"",S=`Added "${y}" to ${p?.title??"default list"}${E}`;await(0,b.showToast)({style:b.Toast.Style.Success,title:S});return}await(0,b.showToast)({style:b.Toast.Style.Animated,title:"Adding reminder"});let n=(await Qt()).lists.map(Y=>`${Y.title}:${Y.id}`),i=new Date,a=C(i,"yyyy-MM-dd"),s=C(i,"HH:mm"),o=C(q(i,1),"yyyy-MM-dd"),u=C(bn(i),"yyyy-MM-dd"),m=C(Sn(i),"yyyy-MM-dd"),h=C(Rn(i),"yyyy-MM-dd"),g=q(i,-3),W=C(g,"MMM"),lt=C(g,"d"),mt=C(nn(g,1),"yyyy-MM-dd"),ht=q(i,2),Q=C(ht,"yyyy-MM-dd"),K=C(ht,"EEEE"),pt=C(q(i,9),"yyyy-MM-dd"),J=C(ct(i,1),"haa"),j=C(q(ct(i,1),1),"yyyy-MM-dd'T'HH:00:ss"),ce=C(ct(i,-1),"haa"),ye=C(q(ct(i,-1),1),"yyyy-MM-dd'T'HH:00:ss"),Te=await b.LocalStorage.getItem("saved-locations"),N=`Act as a NLP parser for tasks. I'll give you a task text and you'll return me only a parsable and minified JSON object.


Here's the JSON Object structure:
{
  "title": <Task title>,
  "description": <Task description. A human-readable description of the task. Use relative dates when appropriate. Include the task name in single quotes. Always include the list (or "default list" if none is specified). Always include the priority level if specified. Always include the recurrence if specified.>,
  "priority": <Task priority. Only pick the value from this list: "low", "medium", "high". Use the "high" priority if the task text specifies a word such as "urgent", "important", or an exclamation mark.>,
  "listId": <Task list ID. Pick it from the following table by finding the list name corresponding to an ID: ${n}. Don't add a listId if the user hasn't specified a list name. Note that the user can prepend the "#" or "@" symbols to list names, for example, "#work" or "@work".>,
  "dueDate": <Task due date. Can either be a full day date (YYYY-MM-DD) or an ISO date if the time is specified (YYYY-MM-DDTHH:mm:ss.sssZ). Use sensible defaults for common timeframes (e.g "8am" for "morning", "1pm" for "afternoon", "6pm" for "evening"). A number with "a" or "p" appended (e.g. "1p" or "8a") should be treated as AM or PM. Never use dates before ${a} unless the specific month/day/year is provided. If the user includes a time before ${s} and no date, assume they mean tomorrow>,
  "recurrence": {
    "frequency": <Recurrence frequency. Only pick the value from this list: "daily", "weekly", "monthly", "yearly".>,
    "interval": <Recurrence interval. An integer greater than 0 that specifies how often a pattern repeats. If a recurrence frequency is "weekly" rule and the interval is 1, then the pattern repeats every week. If a recurrence frequency is "monthly" rule and the interval is 3, then the pattern repeats every 3 months.>,
    "endDate": <Recurrence end date. A full day date (YYYY-MM-DD). If no end date is specified, the recurrence will repeat forever.>
  },
  "address": <Task address. If the task text specifies an address, include it here.>,
  "proximity": <Task proximity. Only pick the value from this list: "enter", "leave".>
  "radius": <Task radius. A number that specifies the radius around the location in meters.>
}

Here are the rules you must follow:
- You MUST return a valid, parsable JSON object.
- Any text in quotes should be taken in its entirely as the task's title, and not interpreted for dates, priority, lists, etc.
- The title is made up of all the words you can't parse, in order. NEVER drop words.
- Always capitalize weekday, month, and list names in your output.
- Don't include a time unless specifically indicated by the user.
- Today is ${a} and the current time is ${s}.
- Pay special attention to "this" vs "next" day of the week.
- The weekend begins on Saturday and the week begins on Monday. (e.g. tasks for "next week" would be scheduled for the upcoming Monday.)
- Any recurring task MUST include a dueDate. If no due date is specified, use one that makes the most sense.
- If the user seems to specify an address, search for a matching location in the following data set: ${Te}.

Here are some examples to help you out:
- Respond to email: {"title":"Respond to email"}
- Book flights today: {"title":"Book flights","description":"'Book flights' today to default list","dueDate":"${a}"}
- Collect dry cleaning this evening: {"title":"Collect dry cleaning","description":"'Collect dry cleaning' today at 6pm to default list","dueDate":"${a}T18:00:00.000Z"}
- Ship feature low priority: {"title":"Ship feature","description":"'Ship feature' (low priority) to default list","priority":"low"}
- Pay taxes this weekend important: {"title":"Pay taxes","description":"'Pay taxes' (high priority) on Saturday to default list","priority":"high","dueDate":"${m}"}
- Check for newspaper today!: {"title":"Check for newspaper","description":"'Check for newspaper' (high priority) today to default list","dueDate":"${a}","priority":"high"} 
- Take a walk ${ce}: {"title":"Take a walk","description":"'Take a walk' today at ${ce} to default list","dueDate":"${ye}"}
- Take a walk ${J}: {"title":"Take a walk","description":"'Take a walk' tomorrow at ${J} to default list","dueDate":"${j}"}
- Eat ${ce} nachos: {"title":"Eat nachos","description":"'Eat nachos' today at ${ce} to default list","dueDate":"${ye}"}
- Get groceries ${K}: {"title":"Get groceries","description":"'Get groceries' on ${Q} to default list","dueDate":"${Q}"}
- Get groceries next ${K}: {"title":"Get groceries","description":"'Get groceries' on ${pt} to default list","dueDate":"${pt}"}
- Read a book every day: {"title":"Read a book","description":"'Read a book' daily to default list","dueDate":"${a}","recurrence":{"frequency":"daily","interval":1}, }
- Read every book fri: {"title":"Read every book","description":"'Read every book' on Friday to default list","dueDate":"${u}"}
- Read books every fri: {"title":"Read books","description":"'Read books' weekly on Fridays to default list","dueDate":"${u}","recurrence":{"frequency":"weekly","interval":1}}
- Clean the house every sunday: {"title":"Clean the house","description":"'Clean the house' weekly on Sundays to default list","dueDate":"${h}","recurrence":{"frequency":"weekly","interval":1}
- Call mom monthly on sunday: {"title":"Call mom","description":"'Call mom' monthly starting ${h} to default list","dueDate":"${h}","recurrence":{"frequency":"monthly","interval":1}}
- Dad's birthday on ${W} ${lt}: {"title":"Dad's birthday","description":"'Dad's birthday' on ${mt} to default list","dueDate":"${mt}"}
- Monthly breakfast with friends Saturday: {"title":"Monthly breakfast with friends","description":"'Monthly breakfast with friends' recurring monthly starting ${m} to default list","dueDate":"${m}","recurrence":{"frequency":"monthly","interval":1}}
- Review budget every 2 months starting from tomorrow: {"title":"Review budget","description":"'Review budget' every 2 months starting ${o} to default list","dueDate":"${o}", "recurrence":{"frequency":"monthly","interval":2}}
- Water the flowers every day from tomorrow until ${K}: {"title":"Water the flowers","description":"'Water the flowers' every day from ${o} until ${Q} to default list","dueDate":"${o}","recurrence":{"frequency":"daily","interval":1,"endDate":"${Q}"}}
- Cook meals until ${K}: {"title":"Cook meals","description":"'Cook meals' every day until ${Q} to default list","dueDate":"${a}","recurrence":{"frequency":"daily","interval":1,"endDate":"${Q}"}}

Task text: "${r.fallbackText??r.arguments.text}"`,{description:P,...L}=await Ya(N);if(r.arguments.notes&&(L.notes=r.arguments.notes),L.dueDate&&L.dueDate.includes("T")){let Y=new Date(L.dueDate),p=Y.getTimezoneOffset()*60*1e3;L.dueDate=new Date(Y.getTime()+p).toISOString()}await Kt(L),await(0,b.showToast)({style:b.Toast.Style.Success,title:"Added reminder: "+P})}catch(e){console.log(e);let t=e instanceof Error?e.message:JSON.stringify(e);await(0,b.showToast)({style:b.Toast.Style.Failure,title:"Unable to add reminder",message:t})}}async function Ya(r){for(let t=0;t<3;t++)try{let i=(await b.AI.ask(r,{model:b.AI.Model.OpenAI_GPT4o})).match(/[{\\[]{1}([,:{}\\[\]0-9.\-+Eaeflnr-u \n\r\t]|".*?")+[}\]]{1}/gis)?.[0];if(!i)throw new Error("Invalid result returned from AI");let a=JSON.parse(i.trim());if(a.recurrence&&!a.dueDate)throw new Error("Recurrence without dueDate");return a}catch{console.log(`Retriying AI call. Retry count: ${t}`)}throw new Error("Max retries reached. Unable to get a valid response from AI.")}
