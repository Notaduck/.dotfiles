"use strict";var d=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var S=Object.prototype.hasOwnProperty;var E=(r,e)=>{for(var a in e)d(r,a,{get:e[a],enumerable:!0})},I=(r,e,a,c)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of w(e))!S.call(r,n)&&n!==a&&d(r,n,{get:()=>e[n],enumerable:!(c=H(e,n))||c.enumerable});return r};var D=r=>I(d({},"__esModule",{value:!0}),r);var A={};E(A,{default:()=>h});module.exports=D(A);var t=require("@raycast/api"),u=require("react");var o=require("@raycast/api");var p=async()=>{try{let r=await o.LocalStorage.getItem("uuidHistory");if(!r)return[];if(typeof r!="string")throw new Error("Invalid data type: Expected a string");return r?JSON.parse(r):[]}catch{return await(0,o.showToast)({style:o.Toast.Style.Failure,title:"Error fetching history",message:"Failed to retrieve history from local storage"}),[]}},f=()=>{o.LocalStorage.removeItem("uuidHistory").then(()=>{(0,o.showToast)({style:o.Toast.Style.Success,title:"History Cleared",message:"UUID history has been successfully cleared."})}).catch(r=>{console.error("Failed to clear history from local storage:",r),(0,o.showToast)({style:o.Toast.Style.Failure,title:"Error clearing history",message:"Failed to clear history from local storage"})})},m=async r=>{try{let e=await o.LocalStorage.getItem("uuidHistory");if(!e)return[];if(typeof e!="string")throw new Error("Invalid data type: Expected a string");if(e){let c=JSON.parse(e).filter(n=>n.uuid!==r);return await o.LocalStorage.setItem("uuidHistory",JSON.stringify(c)),c}else return[]}catch(e){return console.error("Failed to delete history entry:",e),[]}};var s=require("react/jsx-runtime");function h(){let[r,e]=(0,u.useState)([]),{defaultAction:a}=(0,t.getPreferenceValues)();(0,u.useEffect)(()=>{async function i(){let y=(await p()).reverse();e(y)}i()},[]);let c=async()=>{await(0,t.confirmAlert)({title:"Clear History",icon:t.Icon.Trash,message:"You can't undo this action. Are you sure you want to clear the history?",primaryAction:{title:"Clear History",onAction:()=>{f(),e([])}}})},n=async i=>{let l=await m(i);e(l)},g=async()=>{let i=r.map(l=>l.uuid).join(`\r
`);a==="copy"?(await t.Clipboard.copy(i),(0,t.showToast)(t.Toast.Style.Success,"Copied all UUIDs to clipboard.")):a==="paste"&&(await t.Clipboard.paste(i),(0,t.showToast)(t.Toast.Style.Success,"Pasted all UUIDs."))};return(0,s.jsx)(t.List,{children:r.map((i,l)=>{let y=new Date(i.timestamp);return(0,s.jsx)(t.List.Item,{title:i.uuid,accessories:[{tag:i.type,tooltip:"Type",icon:t.Icon.Tag},{date:y,tooltip:y.toLocaleString(),icon:t.Icon.Clock}],actions:(0,s.jsxs)(t.ActionPanel,{children:[(0,s.jsx)(t.Action.CopyToClipboard,{content:i.uuid}),(0,s.jsx)(t.Action,{title:`${a==="copy"?"Copy":"Paste"} All UUIDs`,icon:t.Icon.Clipboard,onAction:g}),(0,s.jsxs)(t.ActionPanel.Section,{children:[(0,s.jsx)(t.Action,{title:"Delete Entry",onAction:()=>n(i.uuid),icon:t.Icon.Trash,style:t.Action.Style.Destructive,shortcut:{modifiers:["ctrl"],key:"x"}}),(0,s.jsx)(t.Action,{title:"Clear History",onAction:c,icon:t.Icon.Trash,style:t.Action.Style.Destructive,shortcut:{modifiers:["ctrl","shift"],key:"x"}})]})]})},l)})})}
