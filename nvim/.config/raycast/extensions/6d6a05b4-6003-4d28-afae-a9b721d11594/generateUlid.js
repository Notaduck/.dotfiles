"use strict";var L=Object.create;var h=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var Z=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var O=(e,t)=>{for(var r in t)h(e,r,{get:t[r],enumerable:!0})},E=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of R(t))!S.call(e,o)&&o!==r&&h(e,o,{get:()=>t[o],enumerable:!(n=M(t,o))||n.enumerable});return e};var H=(e,t,r)=>(r=e!=null?L(Z(e)):{},E(t||!e||!e.__esModule?h(r,"default",{value:e,enumerable:!0}):r,e)),v=e=>E(h({},"__esModule",{value:!0}),e);var K={};O(K,{default:()=>z});module.exports=v(K);var a=require("@raycast/api");var y=H(require("node:crypto"),1);function p(e){if(!l(e))throw new Error("Parameter was not an error")}function l(e){return!!e&&typeof e=="object"&&$(e)==="[object Error]"||e instanceof Error}function $(e){return Object.prototype.toString.call(e)}var j="Layerr",G=j;function I(){return G}function w(e){let t,r="";if(e.length===0)t={};else if(l(e[0]))t={cause:e[0]},r=e.slice(1).join(" ")||"";else if(e[0]&&typeof e[0]=="object")t=Object.assign({},e[0]),r=e.slice(1).join(" ")||"";else if(typeof e[0]=="string")t={},r=r=e.join(" ")||"";else throw new Error("Invalid arguments passed to Layerr");return{options:t,shortMessage:r}}var c=class e extends Error{constructor(t,r){let n=[...arguments],{options:o,shortMessage:i}=w(n),s=i;if(o.cause&&(s=`${s}: ${o.cause.message}`),super(s),this.message=s,o.name&&typeof o.name=="string"?this.name=o.name:this.name=I(),o.cause&&Object.defineProperty(this,"_cause",{value:o.cause}),Object.defineProperty(this,"_info",{value:{}}),o.info&&typeof o.info=="object"&&Object.assign(this._info,o.info),Error.captureStackTrace){let m=o.constructorOpt||this.constructor;Error.captureStackTrace(this,m)}}static cause(t){return p(t),t._cause&&l(t._cause)?t._cause:null}static fullStack(t){p(t);let r=e.cause(t);return r?`${t.stack}
caused by: ${e.fullStack(r)}`:t.stack??""}static info(t){p(t);let r={},n=e.cause(t);return n&&Object.assign(r,e.info(n)),t._info&&Object.assign(r,t._info),r}toString(){let t=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(t=`${t}: ${this.message}`),t}};var g="0123456789ABCDEFGHJKMNPQRSTVWXYZ",d=32,b=0xffffffffffff,N=10,V=16,u=Object.freeze({source:"ulid"});function F(e){let t=e||P(),r=t&&(t.crypto||t.msCrypto)||(typeof y.default<"u"?y.default:null);if(typeof r?.getRandomValues=="function")return()=>{let n=new Uint8Array(1);return r.getRandomValues(n),n[0]/255};if(typeof r?.randomBytes=="function")return()=>r.randomBytes(1).readUInt8()/255;if(y.default?.randomBytes)return()=>y.default.randomBytes(1).readUInt8()/255;throw new c({info:{code:"PRNG_DETECT",...u}},"Failed to find a reliable PRNG")}function P(){return J()?self:typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:null}function k(e,t){let r="";for(;e>0;e--)r=X(t)+r;return r}function U(e,t){if(isNaN(e))throw new c({info:{code:"ENC_TIME_NAN",...u}},`Time must be a number: ${e}`);if(e>b)throw new c({info:{code:"ENC_TIME_SIZE_EXCEED",...u}},`Cannot encode a time larger than ${b}: ${e}`);if(e<0)throw new c({info:{code:"ENC_TIME_NEG",...u}},`Time must be positive: ${e}`);if(Number.isInteger(e)===!1)throw new c({info:{code:"ENC_TIME_TYPE",...u}},`Time must be an integer: ${e}`);let r,n="";for(let o=t;o>0;o--)r=e%d,n=g.charAt(r)+n,e=(e-r)/d;return n}function B(e){let t,r=e.length,n,o,i=e,s=d-1;for(;!t&&r-->=0;){if(n=i[r],o=g.indexOf(n),o===-1)throw new c({info:{code:"B32_INC_ENC",...u}},"Incorrectly encoded string");if(o===s){i=D(i,r,g[0]);continue}t=D(i,r,g[o+1])}if(typeof t=="string")return t;throw new c({info:{code:"B32_INC_INVALID",...u}},"Failed incrementing string")}function J(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function _(e){let t=e||F(),r=0,n;return function(i){let s=isNaN(i)?Date.now():i;if(s<=r){let C=n=B(n);return U(r,N)+C}r=s;let m=n=k(V,t);return U(s,N)+m}}function X(e){let t=Math.floor(e()*d);return t===d&&(t=d-1),g.charAt(t)}function D(e,t,r){return t>e.length-1?e:e.substr(0,t)+r+e.substr(t+1)}var f=require("@raycast/api");var x=async(e,t)=>{try{let r=await f.LocalStorage.getItem("uuidHistory");if(r||(r="[]"),typeof r!="string")return;let n=JSON.parse(r);n.push({uuid:e,timestamp:new Date,type:t}),await f.LocalStorage.setItem("uuidHistory",JSON.stringify(n))}catch{await(0,f.showToast)({style:f.Toast.Style.Failure,title:"Error saving history",message:"Failed to save history to local storage"})}};async function A(e,t,r=!1,n="uuidV4"){let o=Array.from(Array(t)).map(()=>{let i=e();return r?i.toUpperCase():i});for(let i of o)await x(i,n);return o}var Y=_(),T=1e4,z=async e=>{let{numberOfULIDsToGenerate:t}=e.arguments,{upperCaseLetters:r,defaultAction:n}=(0,a.getPreferenceValues)();t||(t="1");try{let o=parseInt(t,10);if(isNaN(o))throw new Error("INVALID_NUMBER");if(o<=T){let i=await A(Y,o,r,"ulid");n==="copy"?await a.Clipboard.copy(i.join(`\r
`)):n==="paste"&&await a.Clipboard.paste(i.join(`\r
`));let s=n==="copy"?"Copied":"Pasted",m=i.length>1?`${s} ${i.length} new ULIDs.`:`${s} new ULID: ${i}`;await(0,a.showHUD)(`\u2705 ${m}`)}else await(0,a.showToast)({style:a.Toast.Style.Failure,title:"Too many ULIDs requested.",message:`${o} exceeds maximum ULIDs of ${T}. Try a lower number.`})}catch{await(0,a.showToast)({style:a.Toast.Style.Failure,title:"Invalid number.",message:"An invalid number has been provided. Try an actual number."})}};
